{
  "test_cases": [
    {
      "name": "Missing Tax ID",
      "invoice": {
        "invoice_id": "INV-2024-E01",
        "vendor_name": "TechSupply Inc",
        "vendor_tax_id": "",
        "invoice_date": "2024-01-25",
        "due_date": "2024-02-24",
        "amount": 5000.00,
        "currency": "USD",
        "line_items": [
          {"desc": "Office Supplies", "qty": 100, "unit_price": 50.00, "total": 5000.00}
        ],
        "attachments": []
      },
      "expected_behavior": "Should flag missing_info but continue processing"
    },
    {
      "name": "Amount Mismatch Within Tolerance",
      "invoice": {
        "invoice_id": "INV-2024-E02",
        "vendor_name": "Acme Corporation",
        "vendor_tax_id": "12-3456789",
        "invoice_date": "2024-01-26",
        "due_date": "2024-02-25",
        "amount": 15500.00,
        "currency": "USD",
        "line_items": [
          {"desc": "Widget Type A", "qty": 100, "unit_price": 100.00, "total": 10000.00},
          {"desc": "Widget Type B", "qty": 55, "unit_price": 100.00, "total": 5500.00}
        ],
        "attachments": ["invoice_e02.pdf"],
        "po_reference": "PO-2024-001"
      },
      "expected_behavior": "Within 5% tolerance of PO-2024-001 (15000), should PASS matching"
    },
    {
      "name": "Amount Mismatch Outside Tolerance",
      "invoice": {
        "invoice_id": "INV-2024-E03",
        "vendor_name": "Acme Corporation",
        "vendor_tax_id": "12-3456789",
        "invoice_date": "2024-01-27",
        "due_date": "2024-02-26",
        "amount": 20000.00,
        "currency": "USD",
        "line_items": [
          {"desc": "Widget Type A", "qty": 150, "unit_price": 100.00, "total": 15000.00},
          {"desc": "Rush Delivery Fee", "qty": 1, "unit_price": 5000.00, "total": 5000.00}
        ],
        "attachments": ["invoice_e03.pdf"],
        "po_reference": "PO-2024-001"
      },
      "expected_behavior": "33% difference from PO, should FAIL and trigger HITL"
    },
    {
      "name": "Multiple Line Items Partial Match",
      "invoice": {
        "invoice_id": "INV-2024-E04",
        "vendor_name": "Global Parts Ltd",
        "vendor_tax_id": "98-7654321",
        "invoice_date": "2024-01-28",
        "due_date": "2024-02-27",
        "amount": 32500.00,
        "currency": "USD",
        "line_items": [
          {"desc": "Component X1", "qty": 200, "unit_price": 75.00, "total": 15000.00},
          {"desc": "Component X2", "qty": 100, "unit_price": 100.00, "total": 10000.00},
          {"desc": "Component X3", "qty": 50, "unit_price": 150.00, "total": 7500.00}
        ],
        "attachments": ["invoice_e04.pdf"],
        "po_reference": "PO-2024-002"
      },
      "expected_behavior": "Should match against PO-2024-002 (32500 total)"
    },
    {
      "name": "High Risk Vendor",
      "invoice": {
        "invoice_id": "INV-2024-E05",
        "vendor_name": "New Startup Co",
        "vendor_tax_id": "55-1234567",
        "invoice_date": "2024-01-29",
        "due_date": "2024-02-28",
        "amount": 100000.00,
        "currency": "USD",
        "line_items": [
          {"desc": "Enterprise License", "qty": 1, "unit_price": 100000.00, "total": 100000.00}
        ],
        "attachments": ["invoice_e05.pdf"]
      },
      "expected_behavior": "High amount + new vendor = high risk score, may require escalated approval"
    },
    {
      "name": "Foreign Currency",
      "invoice": {
        "invoice_id": "INV-2024-E06",
        "vendor_name": "Euro Supplies GmbH",
        "vendor_tax_id": "DE123456789",
        "invoice_date": "2024-01-30",
        "due_date": "2024-03-01",
        "amount": 8500.00,
        "currency": "EUR",
        "line_items": [
          {"desc": "European Components", "qty": 100, "unit_price": 85.00, "total": 8500.00}
        ],
        "attachments": ["invoice_e06.pdf"],
        "po_reference": "PO-2024-003"
      },
      "expected_behavior": "Currency conversion required before matching"
    }
  ]
}

